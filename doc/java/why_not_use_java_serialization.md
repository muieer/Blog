# 为什么其他方法优先于 Java 序列化

《Effective Java》第三版的第 85 条规则是**其他方法优先于 Java 序列化**。这篇文章分享我对这条规则的个人理解。

## 什么是 Java 序列化

Java 序列化指 Java 对象序列化和反序列化。

对象序列化是将 JVM 中的对象编码成字节流写入到 JVM 外的其他地方。对象反序列化是读取 JVM 外的字节流并还原成对象存放到 JVM 中的过程。

## Java 序列化的作用

我个人的理解是 Java 序列化是为了方便 Java 程序跨进程传输对象数据。

Java 序列化的数据可以被本机不同进程的 Java 程序读取，也可以被其他计算机的 Java 程序读取。

## Java 序列化存在的问题

程序是指令和数据的集合。在 Java 中，我认为类可以看作是指令的集合（忽略类变量这种情况）。对象是程序，包含了指令和数据。

Java 程序反序列化获取一个对象其实就是加载了一个程序，这个程序可能会做出有害的行为，造成恶劣的后果，这就是 Java 序列化存在的问题。

## 规避 Java 序列化问题的方式

1. 只传输数据，不使用 Java 序列化机制。如使用 JSON 和 Protocol Buffers 这些跨平台结构化数据表示法。
2. 只反序列化白名单中类的实例对象。第一种方式优先于第二种方式。